{"ast":null,"code":"import _objectSpread from \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/components/auth/UserPage.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport AuthContext from '../../contexts/auth/authContext';\nimport AlertContext from '../../contexts/alerts/alertContext';\n\nconst UserPage = props => {\n  const authContext = useContext(AuthContext);\n  const user = authContext.user,\n        updateUser = authContext.updateUser,\n        changeUserPassword = authContext.changeUserPassword,\n        deleteUser = authContext.deleteUser,\n        error = authContext.error,\n        clearUserErrors = authContext.clearUserErrors;\n  const alertContext = useContext(AlertContext);\n  const setAlert = alertContext.setAlert,\n        clearAlerts = alertContext.clearAlerts;\n\n  const _useState = useState({\n    firstName: '',\n    lastName: '',\n    alias: '',\n    searchable: true,\n    email: '',\n    oldPassword: '',\n    newPassword: '',\n    newPassword2: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        current = _useState2[0],\n        setCurrent = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        passwordToggle = _useState4[0],\n        setPasswordToggle = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        editToggle = _useState6[0],\n        setEditToggle = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        deleteToggle = _useState8[0],\n        setDeleteToggle = _useState8[1];\n\n  const firstName = current.firstName,\n        lastName = current.lastName,\n        alias = current.alias,\n        searchable = current.searchable,\n        email = current.email,\n        oldPassword = current.oldPassword,\n        newPassword = current.newPassword,\n        newPassword2 = current.newPassword2; //populate current with user values\n\n  useEffect(() => {\n    setCurrent(_objectSpread({}, current, {}, user)); //eslint-disable-next-line\n  }, [user]); //set alert if error\n\n  useEffect(() => {\n    if (error === 'User updated!') {\n      setEditToggle(false);\n    } else if (error === 'Password changed!') {\n      setPasswordToggle(false);\n    } else if (error === 'User deleted.') {\n      setDeleteToggle(false);\n    }\n\n    if (error) {\n      setAlert(error);\n      clearUserErrors();\n    } //eslint-disable-next-line\n\n  }, [error]);\n\n  const handlePassword = () => {\n    clearAlerts();\n    if (newPassword !== newPassword2) setAlert('Passwords do not match.');else {\n      changeUserPassword({\n        oldPassword,\n        newPassword,\n        newPassword2\n      }, props.match.params.id);\n    }\n  };\n\n  const handleEdit = () => {\n    clearAlerts();\n    if (firstName === '') setAlert('Please enter a first name.');else if (lastName === '') setAlert('Please enter a last name.');else if (email === '') setAlert('Please enter an email.');else {\n      updateUser(current);\n    }\n  };\n\n  const handleChange = e => {\n    setCurrent(_objectSpread({}, current, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleClick = () => {\n    setCurrent(_objectSpread({}, current, {\n      searchable: !searchable\n    }));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"form-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, \"User Profile\"), editToggle && React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"firstName\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"First Name\"), React.createElement(\"input\", {\n    type: \"text\",\n    value: firstName,\n    name: \"firstName\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"lastName\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Last Name\"), React.createElement(\"input\", {\n    type: \"text\",\n    value: lastName,\n    name: \"lastName\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"alias\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Alias (optional - the name your friends will see)\"), React.createElement(\"input\", {\n    type: \"text\",\n    value: alias,\n    name: \"alias\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Email Address\"), React.createElement(\"input\", {\n    type: \"email\",\n    value: email,\n    name: \"email\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Privacy\"), React.createElement(\"label\", {\n    className: \"switch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: searchable,\n    name: \"searchable\",\n    onChange: handleClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"slider round\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  })), React.createElement(\"span\", {\n    className: \"register-span\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, \"Are other users allowed to search for your name, email, and alias? This is how friends will find you.\")), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Save User\",\n    className: \"btn btn-primary btn-block\",\n    onClick: handleEdit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  })), passwordToggle && React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"oldPassword\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"Current Password\"), React.createElement(\"input\", {\n    type: \"password\",\n    value: oldPassword,\n    name: \"oldPassword\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"newPassword\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"New Password\"), React.createElement(\"input\", {\n    type: \"password\",\n    value: newPassword,\n    name: \"newPassword\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"newPassword2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, \"Verify New Password\"), React.createElement(\"input\", {\n    type: \"password\",\n    value: newPassword2,\n    name: \"newPassword2\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Change Password\",\n    className: \"btn btn-primary btn-block\",\n    onClick: handlePassword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  })), deleteToggle && React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"Deleting your account cannot be undone and your information cannot be recovered. Any goals, competitions, or friendships you have will be permanently lost. Are you sure you want to delete your account?\"), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"No, keep my account.\",\n    className: \"btn btn-primary btn-block\",\n    onClick: () => setDeleteToggle(false),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Yes, delete my account.\",\n    className: \"btn btn-danger btn-block\",\n    onClick: deleteUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  })), !editToggle && !passwordToggle && !deleteToggle && React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Et beatae inventore porro non aut incidunt excepturi expedita molestias quod ex unde veniam omnis, fugit corporis saepe placeat sit veritatis itaque?\"), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Edit User\",\n    className: \"btn btn-primary btn-block\",\n    onClick: () => setEditToggle(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Change Password\",\n    className: \"btn btn-primary btn-block\",\n    onClick: () => setPasswordToggle(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Delete User\",\n    className: \"btn btn-danger btn-block\",\n    onClick: () => setDeleteToggle(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  })));\n};\n\nexport default UserPage;","map":{"version":3,"sources":["/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/components/auth/UserPage.js"],"names":["React","useContext","useState","useEffect","AuthContext","AlertContext","UserPage","props","authContext","user","updateUser","changeUserPassword","deleteUser","error","clearUserErrors","alertContext","setAlert","clearAlerts","firstName","lastName","alias","searchable","email","oldPassword","newPassword","newPassword2","current","setCurrent","passwordToggle","setPasswordToggle","editToggle","setEditToggle","deleteToggle","setDeleteToggle","handlePassword","match","params","id","handleEdit","handleChange","e","target","name","value","handleClick"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport AuthContext from '../../contexts/auth/authContext';\nimport AlertContext from '../../contexts/alerts/alertContext';\n\nconst UserPage = props => {\n  const authContext = useContext(AuthContext);\n  const { user, updateUser, changeUserPassword, deleteUser, error, clearUserErrors } = authContext;\n  \n  const alertContext = useContext(AlertContext);\n  const { setAlert, clearAlerts } = alertContext;\n  \n  const [current, setCurrent] = useState({\n    firstName: '',\n    lastName: '',\n    alias: '',\n    searchable: true,\n    email: '',\n    oldPassword: '',\n    newPassword: '',\n    newPassword2: ''\n  });\n  const [passwordToggle, setPasswordToggle] = useState(false);\n  const [editToggle, setEditToggle] = useState(false);\n  const [deleteToggle, setDeleteToggle] = useState(false);\n  \n  const { firstName, lastName, alias, searchable, email, oldPassword, newPassword, newPassword2} = current;\n\n  //populate current with user values\n  useEffect(() => {\n    setCurrent({...current, ...user});\n    //eslint-disable-next-line\n  },[user]);\n\n  //set alert if error\n  useEffect(() => {\n    if(error === 'User updated!') {\n      setEditToggle(false);\n    }\n    else if (error === 'Password changed!') {\n      setPasswordToggle(false);\n    }\n    else if (error === 'User deleted.') {\n      setDeleteToggle(false);\n    }\n    if (error) {\n      setAlert(error);\n      clearUserErrors();\n    }\n    //eslint-disable-next-line\n  }, [error]);\n\n  const handlePassword = () => {\n    clearAlerts();\n    if (newPassword !== newPassword2)\n      setAlert('Passwords do not match.');\n    else {\n      changeUserPassword({oldPassword, newPassword, newPassword2}, props.match.params.id);\n    }\n  };\n\n  const handleEdit = () => {\n    clearAlerts();\n    if (firstName === '') \n      setAlert('Please enter a first name.');\n    else if (lastName === '')\n      setAlert('Please enter a last name.');\n    else if (email === '')\n      setAlert('Please enter an email.');\n    else {\n      updateUser(current);\n    }\n  };\n\n  const handleChange = e => {\n    setCurrent({...current, [e.target.name]: e.target.value});\n  };\n  \n  const handleClick = () => {\n    setCurrent({ ...current, searchable: !searchable });\n  };\n\n  return (\n    <div className='form-container'>\n      <h1>User Profile</h1>\n      {/*Edit module*/}\n      {editToggle && (\n      <form>\n        {/*First Name*/}\n        <div className=\"form-group\">\n          <label htmlFor='firstName'>First Name</label>\n          <input\n            type='text'\n            value={firstName}\n            name='firstName'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Last Name*/}\n        <div className=\"form-group\">\n          <label htmlFor='lastName'>Last Name</label>\n          <input\n            type='text'\n            value={lastName}\n            name='lastName'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Alias*/}\n        <div className=\"form-group\">\n          <label htmlFor='alias'>Alias (optional - the name your friends will see)</label>\n          <input\n            type='text'\n            value={alias}\n            name='alias'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Email Address*/}\n        <div className=\"form-group\">\n          <label htmlFor='email'>Email Address</label>\n          <input\n            type='email'\n            value={email}\n            name='email'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Privacy*/}\n        <div className=\"form-group\">\n          <label className='block'>Privacy</label>\n          <label className='switch'>\n            <input\n              type='checkbox'\n              checked={searchable}\n              name='searchable'\n              onChange={handleClick}\n            />\n            <span className='slider round'/>\n          </label>\n          <span className='register-span'>Are other users allowed to search for your name, email, and alias? This is how friends will find you.</span>\n        </div>\n        {/*Save Button*/}\n        <input \n          type='button'\n          value='Save User'\n          className='btn btn-primary btn-block'\n          onClick={handleEdit}\n        />\n      </form>\n      )}\n      {/*Password module*/}\n      {passwordToggle && (\n      <form>\n        {/*Old password*/}\n        <div className=\"form-group\">\n          <label htmlFor='oldPassword'>Current Password</label>\n          <input\n            type='password'\n            value={oldPassword}\n            name='oldPassword'\n            onChange={handleChange}\n          />\n        </div>\n        {/*New Password*/}\n        <div className=\"form-group\">\n          <label htmlFor='newPassword'>New Password</label>\n          <input\n            type='password'\n            value={newPassword}\n            name='newPassword'\n            onChange={handleChange}\n          />\n        </div>\n        {/*New Password 2*/}\n        <div className=\"form-group\">\n          <label htmlFor='newPassword2'>Verify New Password</label>\n          <input\n            type='password'\n            value={newPassword2}\n            name='newPassword2'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Save Button*/}\n        <input\n          type='button'\n          value='Change Password'\n          className='btn btn-primary btn-block'\n          onClick={handlePassword}\n        />\n      </form>\n      )}\n      {/*Delete module*/}\n      {deleteToggle && (\n      <form>\n        <span>Deleting your account cannot be undone and your information cannot be recovered. Any goals, competitions, or friendships you have will be permanently lost. Are you sure you want to delete your account?</span>\n        <input\n            type='button'\n            value='No, keep my account.'\n            className='btn btn-primary btn-block'\n            onClick={() => setDeleteToggle(false)}\n          />\n        <input\n            type='button'\n            value='Yes, delete my account.'\n            className='btn btn-danger btn-block'\n            onClick={deleteUser}\n          />\n      </form>\n      )}\n      {/*Edit, Change Password, and Delete Button*/}\n      {!editToggle && !passwordToggle && !deleteToggle && (\n        <React.Fragment>\n          <span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Et beatae inventore porro non aut incidunt excepturi expedita molestias quod ex unde veniam omnis, fugit corporis saepe placeat sit veritatis itaque?</span>\n          <input\n            type='button'\n            value='Edit User'\n            className='btn btn-primary btn-block'\n            onClick={() => setEditToggle(true)}\n          />\n          <input\n            type='button'\n            value='Change Password'\n            className='btn btn-primary btn-block'\n            onClick={() => setPasswordToggle(true)}\n          />\n          <input\n            type='button'\n            value='Delete User'\n            className='btn btn-danger btn-block'\n            onClick={() => setDeleteToggle(true)}\n          />\n        </React.Fragment>\n      )}\n    </div>\n  )\n}\n\nexport default UserPage;"]},"metadata":{},"sourceType":"module"}