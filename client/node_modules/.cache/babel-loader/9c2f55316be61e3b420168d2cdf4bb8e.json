{"ast":null,"code":"import _slicedToArray from \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/contexts/requests/requestState.js\";\nimport React, { useReducer } from 'react';\nimport axios from 'axios';\nimport RequestContext from './requestContext';\nimport RequestReducer from './requestReducer';\nimport { GET_REQUESTS, ADD_REQUEST, DELETE_REQUEST, REQUEST_ERROR, CLEAR_REQUESTS_ERROR, CLEAR_REQUESTS, SET_REQUESTS_LOADING } from '../types';\n\nconst RequestState = props => {\n  const initialState = {\n    requests: [],\n    requestsSent: [],\n    requestsReceived: [],\n    requestsError: null,\n    requestsLoading: true\n  };\n\n  const _useReducer = useReducer(RequestReducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1]; //set headers for \n\n\n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }; //get user requests\n\n  const getRequests = async () => {\n    try {\n      setLoading();\n      const res = await axios.get('/api/requests');\n      dispatch({\n        type: GET_REQUESTS,\n        payload: {\n          requests: res.data.requests,\n          id: res.data.id\n        }\n      });\n    } catch (err) {\n      dispatch({\n        type: REQUEST_ERROR,\n        payload: err.response.data.msg\n      });\n    }\n  }; //add request\n\n\n  const addRequest = async _id => {\n    try {\n      setLoading();\n      const res = await axios.post(`/api/requests/${_id}`);\n      dispatch({\n        type: ADD_REQUEST,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: REQUEST_ERROR,\n        payload: err.response.data.msg\n      });\n    }\n  }; //delete request - takes place after delete request you sent, accept request other sent, or reject request other sent \n\n\n  const deleteRequest = async _id => {\n    try {\n      setLoading();\n      await axios.delete(`/api/requests/${_id}`);\n      dispatch({\n        type: DELETE_REQUEST,\n        payload: _id\n      });\n    } catch (err) {\n      dispatch({\n        type: REQUEST_ERROR,\n        payload: err.response.data.msg\n      });\n    }\n  }; //set loading\n\n\n  const setLoading = () => {\n    return {\n      type: SET_REQUESTS_LOADING\n    };\n  }; //clear errors\n\n\n  const clearRequestsError = () => {\n    dispatch({\n      type: CLEAR_REQUESTS_ERROR\n    });\n  }; //clear requests\n\n\n  const clearRequests = () => {\n    dispatch({\n      type: CLEAR_REQUESTS\n    });\n  };\n\n  return React.createElement(RequestContext.Provider, {\n    value: {\n      requests: state.requests,\n      requestsSent: state.requestsSent,\n      requestsReceived: state.requestsReceived,\n      requestsError: state.requestsError,\n      requestsLoading: state.requestsLoading,\n      getRequests,\n      addRequest,\n      deleteRequest,\n      clearRequestsError,\n      clearRequests\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default RequestState;","map":{"version":3,"sources":["/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/contexts/requests/requestState.js"],"names":["React","useReducer","axios","RequestContext","RequestReducer","GET_REQUESTS","ADD_REQUEST","DELETE_REQUEST","REQUEST_ERROR","CLEAR_REQUESTS_ERROR","CLEAR_REQUESTS","SET_REQUESTS_LOADING","RequestState","props","initialState","requests","requestsSent","requestsReceived","requestsError","requestsLoading","state","dispatch","config","headers","getRequests","setLoading","res","get","type","payload","data","id","err","response","msg","addRequest","_id","post","deleteRequest","delete","clearRequestsError","clearRequests","children"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SACEC,YADF,EAEEC,WAFF,EAGEC,cAHF,EAIEC,aAJF,EAKEC,oBALF,EAMEC,cANF,EAOEC,oBAPF,QAQO,UARP;;AAUA,MAAMC,YAAY,GAAGC,KAAK,IAAI;AAC5B,QAAMC,YAAY,GAAG;AACnBC,IAAAA,QAAQ,EAAE,EADS;AAEnBC,IAAAA,YAAY,EAAE,EAFK;AAGnBC,IAAAA,gBAAgB,EAAE,EAHC;AAInBC,IAAAA,aAAa,EAAE,IAJI;AAKnBC,IAAAA,eAAe,EAAE;AALE,GAArB;;AAD4B,sBASFlB,UAAU,CAACG,cAAD,EAAiBU,YAAjB,CATR;AAAA;AAAA,QASrBM,KATqB;AAAA,QASdC,QATc,oBAW5B;;;AACA,QAAMC,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AADI,GAAf,CAZ4B,CAkB5B;;AACA,QAAMC,WAAW,GAAG,YAAY;AAC9B,QAAI;AACFC,MAAAA,UAAU;AACV,YAAMC,GAAG,GAAG,MAAMxB,KAAK,CAACyB,GAAN,CAAU,eAAV,CAAlB;AACAN,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAEvB,YAAR;AAAsBwB,QAAAA,OAAO,EAAE;AAAEd,UAAAA,QAAQ,EAAEW,GAAG,CAACI,IAAJ,CAASf,QAArB;AAA+BgB,UAAAA,EAAE,EAAEL,GAAG,CAACI,IAAJ,CAASC;AAA5C;AAA/B,OAAD,CAAR;AACD,KAJD,CAIE,OAAOC,GAAP,EAAY;AACZX,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAEpB,aAAR;AAAuBqB,QAAAA,OAAO,EAAEG,GAAG,CAACC,QAAJ,CAAaH,IAAb,CAAkBI;AAAlD,OAAD,CAAR;AACD;AACF,GARD,CAnB4B,CA6B5B;;;AACA,QAAMC,UAAU,GAAG,MAAMC,GAAN,IAAa;AAC9B,QAAI;AACFX,MAAAA,UAAU;AACV,YAAMC,GAAG,GAAG,MAAMxB,KAAK,CAACmC,IAAN,CAAY,iBAAgBD,GAAI,EAAhC,CAAlB;AACAf,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAEtB,WAAR;AAAqBuB,QAAAA,OAAO,EAAEH,GAAG,CAACI;AAAlC,OAAD,CAAR;AACD,KAJD,CAIE,OAAOE,GAAP,EAAY;AACZX,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAEpB,aAAR;AAAuBqB,QAAAA,OAAO,EAAEG,GAAG,CAACC,QAAJ,CAAaH,IAAb,CAAkBI;AAAlD,OAAD,CAAR;AACD;AACF,GARD,CA9B4B,CAwC5B;;;AACA,QAAMI,aAAa,GAAG,MAAMF,GAAN,IAAa;AACjC,QAAI;AACFX,MAAAA,UAAU;AACV,YAAMvB,KAAK,CAACqC,MAAN,CAAc,iBAAgBH,GAAI,EAAlC,CAAN;AACAf,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAErB,cAAR;AAAwBsB,QAAAA,OAAO,EAAEO;AAAjC,OAAD,CAAR;AACD,KAJD,CAIE,OAAOJ,GAAP,EAAY;AACZX,MAAAA,QAAQ,CAAC;AAAEO,QAAAA,IAAI,EAAEpB,aAAR;AAAuBqB,QAAAA,OAAO,EAAEG,GAAG,CAACC,QAAJ,CAAaH,IAAb,CAAkBI;AAAlD,OAAD,CAAR;AACD;AACF,GARD,CAzC4B,CAmD5B;;;AACA,QAAMT,UAAU,GAAG,MAAM;AACvB,WAAO;AAAEG,MAAAA,IAAI,EAAEjB;AAAR,KAAP;AACD,GAFD,CApD4B,CAwD5B;;;AACA,QAAM6B,kBAAkB,GAAG,MAAM;AAC/BnB,IAAAA,QAAQ,CAAC;AAAEO,MAAAA,IAAI,EAAEnB;AAAR,KAAD,CAAR;AACD,GAFD,CAzD4B,CA6D5B;;;AACA,QAAMgC,aAAa,GAAG,MAAM;AAC1BpB,IAAAA,QAAQ,CAAC;AAAEO,MAAAA,IAAI,EAAElB;AAAR,KAAD,CAAR;AACD,GAFD;;AAIA,SACE,oBAAC,cAAD,CAAgB,QAAhB;AACA,IAAA,KAAK,EAAE;AACLK,MAAAA,QAAQ,EAAEK,KAAK,CAACL,QADX;AAELC,MAAAA,YAAY,EAAEI,KAAK,CAACJ,YAFf;AAGLC,MAAAA,gBAAgB,EAAEG,KAAK,CAACH,gBAHnB;AAILC,MAAAA,aAAa,EAAEE,KAAK,CAACF,aAJhB;AAKLC,MAAAA,eAAe,EAAEC,KAAK,CAACD,eALlB;AAMLK,MAAAA,WANK;AAOLW,MAAAA,UAPK;AAQLG,MAAAA,aARK;AASLE,MAAAA,kBATK;AAULC,MAAAA;AAVK,KADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaG5B,KAAK,CAAC6B,QAbT,CADF;AAiBD,CAnFD;;AAqFA,eAAe9B,YAAf","sourcesContent":["import React, { useReducer } from 'react';\nimport axios from 'axios';\nimport RequestContext from './requestContext';\nimport RequestReducer from './requestReducer';\nimport {\n  GET_REQUESTS,\n  ADD_REQUEST,\n  DELETE_REQUEST,\n  REQUEST_ERROR,\n  CLEAR_REQUESTS_ERROR,\n  CLEAR_REQUESTS,\n  SET_REQUESTS_LOADING\n} from '../types';\n\nconst RequestState = props => {\n  const initialState = {\n    requests: [],\n    requestsSent: [],\n    requestsReceived: [],\n    requestsError: null,\n    requestsLoading: true\n  };\n\n  const [state, dispatch] = useReducer(RequestReducer, initialState);\n\n  //set headers for \n  const config = {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  };\n\n  //get user requests\n  const getRequests = async () => {\n    try {\n      setLoading();\n      const res = await axios.get('/api/requests');\n      dispatch({ type: GET_REQUESTS, payload: { requests: res.data.requests, id: res.data.id }});\n    } catch (err) {\n      dispatch({ type: REQUEST_ERROR, payload: err.response.data.msg });\n    }\n  };\n\n  //add request\n  const addRequest = async _id => {\n    try {\n      setLoading();\n      const res = await axios.post(`/api/requests/${_id}`);\n      dispatch({ type: ADD_REQUEST, payload: res.data});\n    } catch (err) {\n      dispatch({ type: REQUEST_ERROR, payload: err.response.data.msg });\n    }\n  };\n  \n  //delete request - takes place after delete request you sent, accept request other sent, or reject request other sent \n  const deleteRequest = async _id => {\n    try {\n      setLoading();\n      await axios.delete(`/api/requests/${_id}`);\n      dispatch({ type: DELETE_REQUEST, payload: _id });\n    } catch (err) {\n      dispatch({ type: REQUEST_ERROR, payload: err.response.data.msg });\n    }\n  };\n\n  //set loading\n  const setLoading = () => {\n    return { type: SET_REQUESTS_LOADING }\n  };\n\n  //clear errors\n  const clearRequestsError = () => {\n    dispatch({ type: CLEAR_REQUESTS_ERROR });\n  };\n\n  //clear requests\n  const clearRequests = () => {\n    dispatch({ type: CLEAR_REQUESTS });\n  };\n\n  return (\n    <RequestContext.Provider\n    value={{\n      requests: state.requests,\n      requestsSent: state.requestsSent,\n      requestsReceived: state.requestsReceived,\n      requestsError: state.requestsError,\n      requestsLoading: state.requestsLoading,\n      getRequests,\n      addRequest,\n      deleteRequest,\n      clearRequestsError,\n      clearRequests\n    }}>\n      {props.children}\n    </RequestContext.Provider>\n  )\n};\n\nexport default RequestState;"]},"metadata":{},"sourceType":"module"}