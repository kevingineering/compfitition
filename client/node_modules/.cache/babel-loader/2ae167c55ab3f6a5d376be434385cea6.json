{"ast":null,"code":"const CreateArray = (competitionParticipants, competitionGoals, type, time, duration, isMax) => {\n  //create array used for leaderboard and chart - Array = [name, total, [runningTotals]]\n  let competitionArray = [];\n  competitionArray = competitionGoals.map(goal => {\n    //calc total to date\n    const tracker = goal.tracker;\n    let count = 0;\n\n    if (type === 'pass/fail') {\n      for (let i = 0; i < tracker.length; i++) {\n        if (tracker[i]) count++;\n      }\n    } else if (type === 'total') {\n      for (let i = 0; i < tracker.length; i++) {\n        count += tracker[i];\n      }\n    } else if (type === 'difference') {\n      let temp = tracker.filter(value => value !== null);\n      if (temp.length > 1) count = temp.pop() - temp[0];else count = 0;\n    } //pair user name with goal\n\n\n    let temp = competitionParticipants.find(user => user._id === goal.user);\n    let name = temp.alias ? temp.alias : temp.firstName; //get tracker values to date (for chart)\n\n    let trackerValues = [];\n    let runningTotal = 0;\n    const length = time < duration ? time + 1 : duration;\n\n    if (type === 'pass/fail') {\n      for (let i = 0; i < length; i++) {\n        if (tracker[i]) runningTotal++;\n        trackerValues.push(runningTotal);\n      }\n    } else if (type === 'total') {\n      for (let i = 0; i < length; i++) {\n        runningTotal += tracker[i];\n        trackerValues.push(runningTotal);\n      }\n    } else if (type === 'difference') {\n      //slice is time + 2 because 0th value is start and we want to include today which is time + 1\n      let values = tracker.slice(0, time + 2); //ensure last value of array is not null\n\n      if (values.slice(-1)[0] === null) {\n        values.pop();\n        values.push(count);\n      }\n\n      trackerValues.push(...values);\n    } //package in array\n\n\n    return [name, count, trackerValues];\n  }); //sort competitionArray\n\n  if (isMax) competitionArray.sort((a, b) => b[1] - a[1]);else competitionArray.sort((a, b) => a[1] - b[1]);\n  return competitionArray;\n};\n\nexport default CreateArray;","map":{"version":3,"sources":["/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/components/competitions/comptable/CreateArray.js"],"names":["CreateArray","competitionParticipants","competitionGoals","type","time","duration","isMax","competitionArray","map","goal","tracker","count","i","length","temp","filter","value","pop","find","user","_id","name","alias","firstName","trackerValues","runningTotal","push","values","slice","sort","a","b"],"mappings":"AAAA,MAAMA,WAAW,GAAG,CAACC,uBAAD,EAA0BC,gBAA1B,EAA4CC,IAA5C,EAAkDC,IAAlD,EAAwDC,QAAxD,EAAkEC,KAAlE,KAA4E;AAE9F;AACA,MAAIC,gBAAgB,GAAG,EAAvB;AAEAA,EAAAA,gBAAgB,GAAGL,gBAAgB,CAACM,GAAjB,CAAqBC,IAAI,IAAI;AAC9C;AAD8C,UAEvCC,OAFuC,GAE5BD,IAF4B,CAEvCC,OAFuC;AAG9C,QAAIC,KAAK,GAAG,CAAZ;;AACA,QAAIR,IAAI,KAAK,WAAb,EAAyB;AACvB,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACG,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvC,YAAIF,OAAO,CAACE,CAAD,CAAX,EAAgBD,KAAK;AACtB;AACF,KAJD,MAKK,IAAIR,IAAI,KAAK,OAAb,EAAsB;AACzB,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACG,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvCD,QAAAA,KAAK,IAAID,OAAO,CAACE,CAAD,CAAhB;AACD;AACF,KAJI,MAKA,IAAIT,IAAI,KAAK,YAAb,EAA2B;AAC9B,UAAIW,IAAI,GAAGJ,OAAO,CAACK,MAAR,CAAeC,KAAK,IAAIA,KAAK,KAAK,IAAlC,CAAX;AACA,UAAIF,IAAI,CAACD,MAAL,GAAc,CAAlB,EACEF,KAAK,GAAGG,IAAI,CAACG,GAAL,KAAaH,IAAI,CAAC,CAAD,CAAzB,CADF,KAGEH,KAAK,GAAG,CAAR;AACH,KApB6C,CAsB9C;;;AACA,QAAIG,IAAI,GAAGb,uBAAuB,CAACiB,IAAxB,CAA6BC,IAAI,IAAIA,IAAI,CAACC,GAAL,KAAaX,IAAI,CAACU,IAAvD,CAAX;AACA,QAAIE,IAAI,GAAGP,IAAI,CAACQ,KAAL,GAAaR,IAAI,CAACQ,KAAlB,GAA0BR,IAAI,CAACS,SAA1C,CAxB8C,CA0B9C;;AACA,QAAIC,aAAa,GAAG,EAApB;AACA,QAAIC,YAAY,GAAG,CAAnB;AACA,UAAMZ,MAAM,GAAGT,IAAI,GAAGC,QAAP,GAAkBD,IAAI,GAAG,CAAzB,GAA6BC,QAA5C;;AACA,QAAIF,IAAI,KAAK,WAAb,EAAyB;AACvB,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,MAApB,EAA4BD,CAAC,EAA7B,EAAiC;AAC/B,YAAIF,OAAO,CAACE,CAAD,CAAX,EAAgBa,YAAY;AAC5BD,QAAAA,aAAa,CAACE,IAAd,CAAmBD,YAAnB;AACD;AACF,KALD,MAMK,IAAItB,IAAI,KAAK,OAAb,EAAsB;AACzB,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,MAApB,EAA4BD,CAAC,EAA7B,EAAiC;AAC/Ba,QAAAA,YAAY,IAAIf,OAAO,CAACE,CAAD,CAAvB;AACAY,QAAAA,aAAa,CAACE,IAAd,CAAmBD,YAAnB;AACD;AACF,KALI,MAMA,IAAItB,IAAI,KAAK,YAAb,EAA2B;AAC9B;AACA,UAAIwB,MAAM,GAAGjB,OAAO,CAACkB,KAAR,CAAc,CAAd,EAAiBxB,IAAI,GAAG,CAAxB,CAAb,CAF8B,CAG9B;;AACA,UAAIuB,MAAM,CAACC,KAAP,CAAa,CAAC,CAAd,EAAiB,CAAjB,MAAwB,IAA5B,EAAkC;AAChCD,QAAAA,MAAM,CAACV,GAAP;AACAU,QAAAA,MAAM,CAACD,IAAP,CAAYf,KAAZ;AACD;;AACDa,MAAAA,aAAa,CAACE,IAAd,CAAmB,GAAGC,MAAtB;AACD,KAnD6C,CAoD9C;;;AACA,WAAO,CAACN,IAAD,EAAOV,KAAP,EAAca,aAAd,CAAP;AACD,GAtDkB,CAAnB,CAL8F,CA6D9F;;AACA,MAAIlB,KAAJ,EACEC,gBAAgB,CAACsB,IAAjB,CAAsB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAAC,CAAD,CAAD,GAAOD,CAAC,CAAC,CAAD,CAAxC,EADF,KAGEvB,gBAAgB,CAACsB,IAAjB,CAAsB,CAACC,CAAD,EAAIC,CAAJ,KAAUD,CAAC,CAAC,CAAD,CAAD,GAAOC,CAAC,CAAC,CAAD,CAAxC;AAEF,SAAOxB,gBAAP;AACD,CApED;;AAsEA,eAAeP,WAAf","sourcesContent":["const CreateArray = (competitionParticipants, competitionGoals, type, time, duration, isMax) => {\n\n  //create array used for leaderboard and chart - Array = [name, total, [runningTotals]]\n  let competitionArray = [];\n  \n  competitionArray = competitionGoals.map(goal => {\n    //calc total to date\n    const {tracker} = goal;\n    let count = 0;\n    if (type === 'pass/fail'){\n      for (let i = 0; i < tracker.length; i++) {\n        if (tracker[i]) count++;\n      }\n    }\n    else if (type === 'total') {\n      for (let i = 0; i < tracker.length; i++) {\n        count += tracker[i];\n      }\n    }\n    else if (type === 'difference') {\n      let temp = tracker.filter(value => value !== null)\n      if (temp.length > 1)\n        count = temp.pop() - temp[0];\n      else\n        count = 0;\n    }\n\n    //pair user name with goal\n    let temp = competitionParticipants.find(user => user._id === goal.user);\n    let name = temp.alias ? temp.alias : temp.firstName;\n\n    //get tracker values to date (for chart)\n    let trackerValues = [];\n    let runningTotal = 0;\n    const length = time < duration ? time + 1 : duration;\n    if (type === 'pass/fail'){\n      for (let i = 0; i < length; i++) {\n        if (tracker[i]) runningTotal++;\n        trackerValues.push(runningTotal);\n      }\n    }\n    else if (type === 'total') {\n      for (let i = 0; i < length; i++) {\n        runningTotal += tracker[i];\n        trackerValues.push(runningTotal);\n      }\n    }\n    else if (type === 'difference') {\n      //slice is time + 2 because 0th value is start and we want to include today which is time + 1\n      let values = tracker.slice(0, time + 2);\n      //ensure last value of array is not null\n      if (values.slice(-1)[0] === null) {\n        values.pop()\n        values.push(count)\n      }\n      trackerValues.push(...values);\n    }\n    //package in array\n    return [name, count, trackerValues]\n  })\n\n  //sort competitionArray\n  if (isMax)\n    competitionArray.sort((a, b) => b[1] - a[1]);\n  else \n    competitionArray.sort((a, b) => a[1] - b[1]);\n\n  return competitionArray;\n};\n\nexport default CreateArray;"]},"metadata":{},"sourceType":"module"}