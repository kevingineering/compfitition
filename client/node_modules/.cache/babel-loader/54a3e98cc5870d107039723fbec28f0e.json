{"ast":null,"code":"import _objectSpread from \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/components/auth/UserPage.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport AuthContext from '../../contexts/auth/authContext';\nimport AlertContext from '../../contexts/alerts/alertContext';\n\nconst UserPage = props => {\n  const authContext = useContext(AuthContext);\n  const user = authContext.user,\n        updateUser = authContext.updateUser,\n        changeUserPassword = authContext.changeUserPassword,\n        deleteUser = authContext.deleteUser,\n        error = authContext.error,\n        clearUserErrors = authContext.clearUserErrors;\n  const alertContext = useContext(AlertContext);\n  const setAlert = alertContext.setAlert,\n        clearAlerts = alertContext.clearAlerts;\n\n  const _useState = useState({\n    firstName: '',\n    lastName: '',\n    alias: '',\n    searchable: true,\n    email: '',\n    oldPassword: '',\n    newPassword: '',\n    newPassword2: ''\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        current = _useState2[0],\n        setCurrent = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        passwordToggle = _useState4[0],\n        setPasswordToggle = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        editToggle = _useState6[0],\n        setEditToggle = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        deleteToggle = _useState8[0],\n        setDeleteToggle = _useState8[1]; //populate current with user values\n\n\n  useEffect(() => {\n    setCurrent(_objectSpread({}, current, {}, user)); //eslint-disable-next-line\n  }, [user]); //set alert if error\n\n  useEffect(() => {\n    if (error) {\n      setAlert(error);\n      clearUserErrors();\n    } //eslint-disable-next-line\n\n  }, [error]);\n  const firstName = current.firstName,\n        lastName = current.lastName,\n        alias = current.alias,\n        searchable = current.searchable,\n        email = current.email,\n        oldPassword = current.oldPassword,\n        newPassword = current.newPassword,\n        newPassword2 = current.newPassword2;\n\n  const handleDelete = () => {//TODO\n  };\n\n  const handlePassword = () => {\n    if (newPassword !== newPassword2) setAlert('Passwords do not match.');else {\n      changeUserPassword({\n        oldPassword,\n        newPassword,\n        newPassword2\n      }, props.match.params.id);\n\n      if (!error) {\n        setAlert('Password changed!');\n        setPasswordToggle(false);\n      } else setAlert(error);\n    }\n  };\n\n  const handleEdit = () => {\n    //TODO\n    //ENTER PASSWORD TO SAVE CHANGES\n    clearAlerts();\n    if (firstName === '') setAlert('Please enter a first name.');else if (lastName === '') setAlert('Please enter a last name.');else if (email === '') setAlert('Please enter an email.');else {\n      updateUser(current);\n\n      if (!error) {\n        setAlert('User updated!');\n        setEditToggle(false);\n      } else setAlert(error);\n    }\n  };\n\n  const handleChange = e => {\n    setCurrent(_objectSpread({}, current, {\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const handleClick = () => {\n    setCurrent(_objectSpread({}, current, {\n      searchable: !searchable\n    }));\n  };\n\n  return React.createElement(\"div\", {\n    className: \"form-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"User Profile\"), editToggle && React.createElement(\"form\", {\n    onSubmit: handleEdit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"firstName\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"First Name\"), React.createElement(\"input\", {\n    type: \"text\",\n    value: firstName,\n    name: \"firstName\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"lastName\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Last Name\"), React.createElement(\"input\", {\n    type: \"text\",\n    value: lastName,\n    name: \"lastName\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"alias\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, \"Alias (optional - the name your friends will see)\"), React.createElement(\"input\", {\n    type: \"text\",\n    value: alias,\n    name: \"alias\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, \"Email Address\"), React.createElement(\"input\", {\n    type: \"email\",\n    value: email,\n    name: \"email\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, \"Privacy\"), React.createElement(\"label\", {\n    className: \"switch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    checked: searchable,\n    name: \"searchable\",\n    onChange: handleClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"slider round\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  })), React.createElement(\"span\", {\n    className: \"register-span\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, \"Are other users allowed to search for your name, email, and alias? This is how friends will find you.\")), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Save User\",\n    className: \"btn btn-primary btn-block\",\n    onClick: handleEdit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  })), passwordToggle && React.createElement(\"form\", {\n    onSubmit: handlePassword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"oldPassword\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"Current Password\"), React.createElement(\"input\", {\n    type: \"password\",\n    value: oldPassword,\n    name: \"oldPassword\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"newPassword\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, \"New Password\"), React.createElement(\"input\", {\n    type: \"password\",\n    value: newPassword,\n    name: \"newPassword\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"newPassword2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, \"Verify New Password\"), React.createElement(\"input\", {\n    type: \"password\",\n    value: newPassword2,\n    name: \"newPassword2\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Change Password\",\n    className: \"btn btn-primary btn-block\",\n    onSubmit: handlePassword,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  })), deleteToggle && React.createElement(\"form\", {\n    onSubmit: handleDelete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }), !editToggle && !passwordToggle && React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Et beatae inventore porro non aut incidunt excepturi expedita molestias quod ex unde veniam omnis, fugit corporis saepe placeat sit veritatis itaque?\"), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Edit User\",\n    className: \"btn btn-primary btn-block\",\n    onClick: () => setEditToggle(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Change Password\",\n    className: \"btn btn-primary btn-block\",\n    onClick: () => setPasswordToggle(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: \"Delete User\",\n    className: \"btn btn-danger btn-block\",\n    onClick: () => setDeleteToggle(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  })));\n};\n\nexport default UserPage;","map":{"version":3,"sources":["/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/components/auth/UserPage.js"],"names":["React","useContext","useState","useEffect","AuthContext","AlertContext","UserPage","props","authContext","user","updateUser","changeUserPassword","deleteUser","error","clearUserErrors","alertContext","setAlert","clearAlerts","firstName","lastName","alias","searchable","email","oldPassword","newPassword","newPassword2","current","setCurrent","passwordToggle","setPasswordToggle","editToggle","setEditToggle","deleteToggle","setDeleteToggle","handleDelete","handlePassword","match","params","id","handleEdit","handleChange","e","target","name","value","handleClick"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport AuthContext from '../../contexts/auth/authContext';\nimport AlertContext from '../../contexts/alerts/alertContext';\n\nconst UserPage = props => {\n  const authContext = useContext(AuthContext);\n  const { user, updateUser, changeUserPassword, deleteUser, error, clearUserErrors } = authContext;\n  \n  const alertContext = useContext(AlertContext);\n  const { setAlert, clearAlerts } = alertContext;\n  \n  const [current, setCurrent] = useState({\n    firstName: '',\n    lastName: '',\n    alias: '',\n    searchable: true,\n    email: '',\n    oldPassword: '',\n    newPassword: '',\n    newPassword2: ''\n  });\n\n  const [passwordToggle, setPasswordToggle] = useState(false);\n  const [editToggle, setEditToggle] = useState(false);\n  const [deleteToggle, setDeleteToggle] = useState(false);\n\n  //populate current with user values\n  useEffect(() => {\n    setCurrent({...current, ...user});\n    //eslint-disable-next-line\n  },[user]);\n\n  //set alert if error\n  useEffect(() => {\n    if (error) {\n      setAlert(error);\n      clearUserErrors();\n    }\n    //eslint-disable-next-line\n  }, [error]);\n\n\n  const { firstName, lastName, alias, searchable, email, oldPassword, newPassword, newPassword2} = current;\n\n  const handleDelete = () => {\n    //TODO\n  };\n\n  const handlePassword = () => {\n    if (newPassword !== newPassword2)\n      setAlert('Passwords do not match.');\n    else {\n      changeUserPassword({oldPassword, newPassword, newPassword2}, props.match.params.id);\n      if (!error) {\n        setAlert('Password changed!');\n        setPasswordToggle(false);\n      }\n      else setAlert(error);\n    }\n  };\n\n  const handleEdit = () => {\n    //TODO\n    //ENTER PASSWORD TO SAVE CHANGES\n    clearAlerts();\n    if (firstName === '') \n      setAlert('Please enter a first name.');\n    else if (lastName === '')\n      setAlert('Please enter a last name.');\n    else if (email === '')\n      setAlert('Please enter an email.');\n    else {\n      updateUser(current);\n      if (!error) {\n        setAlert('User updated!');\n        setEditToggle(false);\n      } \n      else setAlert(error);\n    }\n  };\n\n  const handleChange = e => {\n    setCurrent({...current, [e.target.name]: e.target.value});\n  };\n  \n  const handleClick = () => {\n    setCurrent({ ...current, searchable: !searchable });\n  };\n\n  return (\n    <div className='form-container'>\n      <h1>User Profile</h1>\n      {/*Edit module*/}\n      {editToggle && (\n      <form onSubmit={handleEdit}>\n        {/*First Name*/}\n        <div className=\"form-group\">\n          <label htmlFor='firstName'>First Name</label>\n          <input\n            type='text'\n            value={firstName}\n            name='firstName'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Last Name*/}\n        <div className=\"form-group\">\n          <label htmlFor='lastName'>Last Name</label>\n          <input\n            type='text'\n            value={lastName}\n            name='lastName'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Alias*/}\n        <div className=\"form-group\">\n          <label htmlFor='alias'>Alias (optional - the name your friends will see)</label>\n          <input\n            type='text'\n            value={alias}\n            name='alias'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Email Address*/}\n        <div className=\"form-group\">\n          <label htmlFor='email'>Email Address</label>\n          <input\n            type='email'\n            value={email}\n            name='email'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Privacy*/}\n        <div className=\"form-group\">\n          <label className='block'>Privacy</label>\n          <label className='switch'>\n            <input\n              type='checkbox'\n              checked={searchable}\n              name='searchable'\n              onChange={handleClick}\n            />\n            <span className='slider round'/>\n          </label>\n          <span className='register-span'>Are other users allowed to search for your name, email, and alias? This is how friends will find you.</span>\n        </div>\n        {/*Save Button*/}\n        <input \n          type='button'\n          value='Save User'\n          className='btn btn-primary btn-block'\n          onClick={handleEdit}\n        />\n      </form>\n      )}\n      {/*Password module*/}\n      {passwordToggle && (\n      <form onSubmit={handlePassword}>\n        {/*Old password*/}\n        <div className=\"form-group\">\n          <label htmlFor='oldPassword'>Current Password</label>\n          <input\n            type='password'\n            value={oldPassword}\n            name='oldPassword'\n            onChange={handleChange}\n          />\n        </div>\n        {/*New Password*/}\n        <div className=\"form-group\">\n          <label htmlFor='newPassword'>New Password</label>\n          <input\n            type='password'\n            value={newPassword}\n            name='newPassword'\n            onChange={handleChange}\n          />\n        </div>\n        {/*New Password 2*/}\n        <div className=\"form-group\">\n          <label htmlFor='newPassword2'>Verify New Password</label>\n          <input\n            type='password'\n            value={newPassword2}\n            name='newPassword2'\n            onChange={handleChange}\n          />\n        </div>\n        {/*Save Button*/}\n        <input\n          type='button'\n          value='Change Password'\n          className='btn btn-primary btn-block'\n          onSubmit={handlePassword}\n        />\n      </form>\n      )}\n      {/*Delete module*/}\n      {deleteToggle && (\n      <form onSubmit={handleDelete}>\n\n      </form>\n      )}\n      {/*Edit, Change Password, and Delete Button*/}\n      {!editToggle && !passwordToggle && (\n        <React.Fragment>\n          <span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Et beatae inventore porro non aut incidunt excepturi expedita molestias quod ex unde veniam omnis, fugit corporis saepe placeat sit veritatis itaque?</span>\n          <input\n            type='button'\n            value='Edit User'\n            className='btn btn-primary btn-block'\n            onClick={() => setEditToggle(true)}\n          />\n          <input\n            type='button'\n            value='Change Password'\n            className='btn btn-primary btn-block'\n            onClick={() => setPasswordToggle(true)}\n          />\n          <input\n            type='button'\n            value='Delete User'\n            className='btn btn-danger btn-block'\n            onClick={() => setDeleteToggle(true)}\n          />\n        </React.Fragment>\n      )}\n    </div>\n  )\n}\n\nexport default UserPage;"]},"metadata":{},"sourceType":"module"}