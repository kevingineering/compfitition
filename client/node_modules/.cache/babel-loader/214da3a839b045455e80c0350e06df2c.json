{"ast":null,"code":"import _slicedToArray from \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/contexts/requests/requestState.js\";\nimport React, { useReducer } from 'react';\nimport axios from 'axios';\nimport RequestContext from './requestContext';\nimport RequestReducer from './requestReducer';\nimport { GET_REQUESTS, ADD_REQUEST, DELETE_REQUEST, REQUEST_ERROR, CLEAR_REQUESTS, SET_REQUESTS_LOADING } from '../types';\n\nconst RequestState = props => {\n  const initialState = {\n    requests: [],\n    requestsSent: [],\n    requestsReceived: [],\n    requestsError: null,\n    requestsLoading: true\n  };\n\n  const _useReducer = useReducer(RequestReducer, initialState),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1]; //get user requests\n\n\n  const getRequests = async () => {\n    try {\n      setLoading();\n      const res = await axios.get('/api/requests');\n      dispatch({\n        type: GET_REQUESTS,\n        payload: {\n          requests: res.data.requests,\n          id: res.data.id\n        }\n      });\n    } catch (err) {\n      dispatch({\n        type: REQUEST_ERROR,\n        payload: err.response.data.msg\n      });\n    }\n  }; //add request\n\n\n  const addRequest = async _id => {\n    try {\n      setLoading();\n      const res = await axios.post(`/api/requests/${_id}`);\n      dispatch({\n        type: ADD_REQUEST,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: REQUEST_ERROR,\n        payload: err.response.data.msg\n      });\n    }\n  }; //delete request - takes place after delete request you sent, accept request other sent, or reject request other sent \n\n\n  const deleteRequest = async _id => {\n    try {\n      setLoading();\n      const res = await axios.delete(`/api/requests/${_id}`);\n      dispatch({\n        type: DELETE_REQUEST,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: REQUEST_ERROR,\n        payload: err.response.data.msg\n      });\n    }\n  }; //set loading\n\n\n  const setLoading = () => {\n    return {\n      type: SET_REQUESTS_LOADING\n    };\n  }; //clear requests\n\n\n  const clearRequests = () => {\n    dispatch({\n      type: CLEAR_REQUESTS\n    });\n  };\n\n  return React.createElement(RequestContext.Provider, {\n    value: {\n      requests: state.requests,\n      requestsSent: state.requestsSent,\n      requestsReceived: state.requestsReceived,\n      requestsError: state.requestsError,\n      requestsLoading: state.requestsLoading,\n      getRequests,\n      addRequest,\n      deleteRequest,\n      clearRequests\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, props.children);\n};\n\nexport default RequestState;","map":{"version":3,"sources":["/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/contexts/requests/requestState.js"],"names":["React","useReducer","axios","RequestContext","RequestReducer","GET_REQUESTS","ADD_REQUEST","DELETE_REQUEST","REQUEST_ERROR","CLEAR_REQUESTS","SET_REQUESTS_LOADING","RequestState","props","initialState","requests","requestsSent","requestsReceived","requestsError","requestsLoading","state","dispatch","getRequests","setLoading","res","get","type","payload","data","id","err","response","msg","addRequest","_id","post","deleteRequest","delete","clearRequests","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from 'react';\nimport axios from 'axios';\nimport RequestContext from './requestContext';\nimport RequestReducer from './requestReducer';\nimport {\n  GET_REQUESTS,\n  ADD_REQUEST,\n  DELETE_REQUEST,\n  REQUEST_ERROR,\n  CLEAR_REQUESTS,\n  SET_REQUESTS_LOADING\n} from '../types';\n\nconst RequestState = props => {\n  const initialState = {\n    requests: [],\n    requestsSent: [],\n    requestsReceived: [],\n    requestsError: null,\n    requestsLoading: true\n  };\n\n  const [state, dispatch] = useReducer(RequestReducer, initialState);\n\n  //get user requests\n  const getRequests = async () => {\n    try {\n      setLoading();\n      const res = await axios.get('/api/requests');\n      dispatch({ type: GET_REQUESTS, payload: { requests: res.data.requests, id: res.data.id }});\n    } catch (err) {\n      dispatch({ type: REQUEST_ERROR, payload: err.response.data.msg });\n    }\n  };\n\n  //add request\n  const addRequest = async _id => {\n    try {\n      setLoading();\n      const res = await axios.post(`/api/requests/${_id}`);\n      dispatch({ type: ADD_REQUEST, payload: res.data});\n    } catch (err) {\n      dispatch({ type: REQUEST_ERROR, payload: err.response.data.msg });\n    }\n  };\n  \n  //delete request - takes place after delete request you sent, accept request other sent, or reject request other sent \n  const deleteRequest = async _id => {\n    try {\n      setLoading();\n      const res = await axios.delete(`/api/requests/${_id}`);\n      dispatch({ type: DELETE_REQUEST, payload: res.data });\n    } catch (err) {\n      dispatch({ type: REQUEST_ERROR, payload: err.response.data.msg });\n    }\n  };\n\n  //set loading\n  const setLoading = () => {\n    return { type: SET_REQUESTS_LOADING }\n  };\n\n  //clear requests\n  const clearRequests = () => {\n    dispatch({ type: CLEAR_REQUESTS });\n  };\n\n  return (\n    <RequestContext.Provider\n    value={{\n      requests: state.requests,\n      requestsSent: state.requestsSent,\n      requestsReceived: state.requestsReceived,\n      requestsError: state.requestsError,\n      requestsLoading: state.requestsLoading,\n      getRequests,\n      addRequest,\n      deleteRequest,\n      clearRequests\n    }}>\n      {props.children}\n    </RequestContext.Provider>\n  )\n};\n\nexport default RequestState;"]},"metadata":{},"sourceType":"module"}