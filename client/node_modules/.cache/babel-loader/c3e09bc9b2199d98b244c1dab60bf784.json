{"ast":null,"code":"import _slicedToArray from \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/components/competitions/CompetitionPage.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport GoalContext from '../../contexts/goals/goalContext';\nimport CompetitionContext from '../../contexts/competitions/competitionContext';\nimport AuthContext from '../../contexts/auth/authContext';\nimport Leaderboard from './Leaderboard';\nimport Participants from './Participants';\nimport InviteTable from './InviteTable';\nimport moment from 'moment';\nimport CompetitionTable from './CompetitionTable';\n\nconst CompetitionPage = () => {\n  const _useContext = useContext(GoalContext),\n        goalCurrent = _useContext.goalCurrent;\n\n  const _useContext2 = useContext(CompetitionContext),\n        getCompetitionGoals = _useContext2.getCompetitionGoals,\n        getCompetitionParticipants = _useContext2.getCompetitionParticipants,\n        competition = _useContext2.competition,\n        competitionGoals = _useContext2.competitionGoals,\n        competitionParticipants = _useContext2.competitionParticipants;\n\n  const _useContext3 = useContext(AuthContext),\n        user = _useContext3.user;\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isAdmin = _useState2[0],\n        setIsAdmin = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        isAdminView = _useState4[0],\n        setIsAdminView = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isStarted = _useState6[0],\n        setIsStarted = _useState6[1];\n\n  const _id = competition._id,\n        adminIds = competition.adminIds; //get competition goals and participants\n\n  useEffect(() => {\n    if (Object.entries(competition).length !== 0) {\n      getCompetitionGoals(_id);\n      getCompetitionParticipants(_id);\n      if (adminIds.includes(user._id)) setIsAdmin(true);\n    } //eslint-disable-next-line\n\n  }, [competition]); //calc time to determine which day of competition we are on\n\n  let time = moment().startOf('day').diff(goalCurrent.startDate, 'days');\n  let timeHours = moment().startOf('day').diff(goalCurrent.startDate, 'hours');\n  if (time > duration) time = duration;\n  if (timeHours >= 0) setIsStarted(true);\n  return React.createElement(\"div\", {\n    className: \"grid-1-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, isAdmin && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-primary btn-split\",\n    onClick: () => setIsAdminView(true),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"Admin View\"), React.createElement(\"button\", {\n    className: \"btn btn-primary btn-split\",\n    onClick: () => setIsAdminView(false),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"User View\")), isStarted && React.createElement(Leaderboard, {\n    goals: competitionGoals,\n    time: time,\n    participants: competitionParticipants,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), (isAdminView || !isStarted) && React.createElement(Participants, {\n    participants: competitionParticipants,\n    isAdmin: isAdmin,\n    compId: _id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), isAdminView && !isStarted && React.createElement(InviteTable, {\n    participants: competitionParticipants,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(CompetitionTable, {\n    time: time,\n    isStarted: isStarted,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  })));\n};\n\nexport default CompetitionPage;","map":{"version":3,"sources":["/home/kevin/Documents/js_html_css/fitness_website/second_start/client/src/components/competitions/CompetitionPage.js"],"names":["React","useContext","useState","useEffect","GoalContext","CompetitionContext","AuthContext","Leaderboard","Participants","InviteTable","moment","CompetitionTable","CompetitionPage","goalCurrent","getCompetitionGoals","getCompetitionParticipants","competition","competitionGoals","competitionParticipants","user","isAdmin","setIsAdmin","isAdminView","setIsAdminView","isStarted","setIsStarted","_id","adminIds","Object","entries","length","includes","time","startOf","diff","startDate","timeHours","duration"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport GoalContext from '../../contexts/goals/goalContext';\nimport CompetitionContext from '../../contexts/competitions/competitionContext';\nimport AuthContext from '../../contexts/auth/authContext';\nimport Leaderboard from './Leaderboard';\nimport Participants from './Participants';\nimport InviteTable from './InviteTable';\nimport moment from 'moment';\nimport CompetitionTable from './CompetitionTable';\n\nconst CompetitionPage = () => {\n  const { goalCurrent } = useContext(GoalContext);\n\n  const { \n    getCompetitionGoals, \n    getCompetitionParticipants, \n    competition, \n    competitionGoals, \n    competitionParticipants\n  } = useContext(CompetitionContext);\n\n  const { user } = useContext(AuthContext);\n\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [isAdminView, setIsAdminView] = useState(false);\n  const [isStarted, setIsStarted] = useState(false);\n\n  const { _id, adminIds } = competition;\n\n  //get competition goals and participants\n  useEffect(() => {\n    if(Object.entries(competition).length !== 0) {\n      getCompetitionGoals(_id);\n      getCompetitionParticipants(_id);\n      if(adminIds.includes(user._id))\n        setIsAdmin(true);\n    }\n    //eslint-disable-next-line\n  }, [competition])\n\n  //calc time to determine which day of competition we are on\n  let time = moment().startOf('day').diff(goalCurrent.startDate, 'days');\n  let timeHours = moment().startOf('day').diff(goalCurrent.startDate, 'hours');\n  if (time > duration)\n    time = duration;\n\n  if (timeHours >= 0)\n    setIsStarted(true);\n\n  return (\n    <div className='grid-1-2'>\n      <div>\n        {isAdmin && \n          <div>\n            <button className='btn btn-primary btn-split' onClick={() => setIsAdminView(true)}>\n              Admin View\n            </button>\n            <button className='btn btn-primary btn-split' onClick={() => setIsAdminView(false)}>\n              User View\n            </button>\n          </div>\n        }\n        {isStarted &&\n          <Leaderboard \n            goals={competitionGoals} \n            time={time}\n            participants={competitionParticipants}  \n          />\n        }\n        {(isAdminView || !isStarted) && \n          <Participants \n            participants={competitionParticipants} \n            isAdmin={isAdmin}\n            compId={_id}\n          />\n        }\n        {isAdminView && !isStarted &&\n          <InviteTable \n            participants={competitionParticipants}\n          />\n        }\n      </div>\n      <div>\n        <CompetitionTable \n          time={time}\n          isStarted={isStarted}\n        />\n      </div>\n    </div>\n  )\n}\n\nexport default CompetitionPage;"]},"metadata":{},"sourceType":"module"}